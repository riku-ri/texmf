\input luatexja.sty%
%%%
\expandafter\newtoks\csname^\string\font\endcsname%
\expandafter\newtoks\csname^\string\jfont\endcsname%
\expandafter\newtoks\csname\string\font\string\fontsize\endcsname%
\expandafter\newtoks\csname\string\jfont\string\fontsize\endcsname%
%%%
\def\notcsname#1{\csname\string\notcsname\expandafter\endcsname#1\relax}%
\expandafter\def\csname\string\notcsname\endcsname#1#2\relax{#2}%
%
\expandafter\def\csname\string\FONT\endcsname#1#2=#3{%
\expandafter#1\csname\string#1\string#2\endcsname={#3} \the\csname\string#1\string\fontsize\endcsname\relax%
\expandafter\ifx\csname\string#2\endcsname\relax\csname newtoks\expandafter\endcsname\csname\string#2\endcsname\else\relax\fi%
\csname\string#2\endcsname={\csname\string\font\string#2\endcsname\csname\string\jfont\string#2\endcsname}%
\expandafter\ifx\csname\string#1\string\fontname\string#2\endcsname\relax\csname newtoks\expandafter\endcsname\csname\string#1\string\fontname\string#2\endcsname\else\relax\fi%
\csname\string#1\string\fontname\string#2\endcsname={#3}%
%
\csname^\string#1\endcsname={\expandafter\notcsname\string#2}%
\expandafter\edef\csname!\string\font\endcsname{\the\csname^\string\jfont\endcsname}%
\expandafter\edef\csname!\string\jfont\endcsname{\the\csname^\string\font\endcsname}%
\edef#2{%
\the\csname\string#2\endcsname%
\csname^\string\font\endcsname={\csname!\string\jfont\endcsname}%
\csname^\string\jfont\endcsname={\csname!\string\font\endcsname}%
}%
}%
\def\afont#1=#2{\csname\string\FONT\endcsname\font#1={#2}}% ascii font
\def\ufont#1=#2{\csname\string\FONT\endcsname\jfont#1={#2}}% unicode font
\def\cfont#1=#2{\afont#1={#2}\ufont#1={#2}}% both
\expandafter\def\csname\string\fontsize\endcsname#1#2{%
\csname\string#1\string\fontsize\endcsname={#2}%
\csname\string\FONT\expandafter\endcsname\expandafter#1\csname\the\csname^\string#1\endcsname\expandafter\endcsname\expandafter=\expandafter%
{\the\csname\string#1\string\fontname\expandafter\string\csname\the\csname^\string#1\endcsname\endcsname\expandafter\endcsname}%
}%
\def\afontsize#1{%
\expandafter\ifx\csname\the\csname^\string\font\endcsname\endcsname\relax%
\csname\string\font\string\fontsize\endcsname={#1}%
\relax%
\else% content of this toks is only set after run \afont
\csname\string\fontsize\endcsname\font{#1}%
\csname\the\csname^\string\font\endcsname\endcsname%
\fi%
}%
\def\ufontsize#1{%
\expandafter\ifx\csname\the\csname^\string\jfont\endcsname\endcsname\relax%
\csname\string\jfont\string\fontsize\endcsname={#1}%
\else% content of this toks is only set after run \afont
\csname\string\fontsize\endcsname\jfont{#1}%
\csname\the\csname^\string\font\endcsname\endcsname%
\fi%
}%
\def\fontsize#1{\afontsize{#1}\ufontsize{#1}}%
%%%
\def\tiny{at 5pt}%
\def\scriptsize{at 7pt}%
\def\footnotesize{at 8pt}%
\def\small{at 9pt}%
\def\normalsize{at 10pt}%
\def\large{at 12pt}%
\def\Large{at 14.4pt}%
\def\LARGE{at 17.28pt}%
\def\huge{at 20.74pt}%
\def\Huge{at 24.88pt}%
\def\BACKGROUND{at 51.60pt}%
%%
%% test case: [msmincho] and [simsun] font is required
%\hrule\vskip2em
%\begingroup\obeylines\endlinechar=\active\relax
%%%%
%%\afont\a={[msmincho.ttc]}\relax
%%%\expandafter\showthe\csname\string\font\string\fontname\string\a\endcsname
%%%\expandafter\showthe\csname^\string\font\endcsname
%%%\expandafter\show\csname!\string\jfont\endcsname
%%%%
%%\ufont\a={[msmincho.ttc]}\relax
%%%\expandafter\showthe\csname\string\jfont\string\fontname\string\a\endcsname
%%%\expandafter\showthe\csname^\string\jfont\endcsname
%%%\expandafter\show\csname!\string\font\endcsname
%%%%
%\ufont\a={[lulix-monoflow.ttf]}\relax
%\afont\a={[msmincho.ttc]}\relax
%%\cfont\a={[msmincho.ttc]}\relax
%\fontsize{scaled 5000}
%\fontsize{scaled 2000}
%%\afontsize\BACKGROUND
%%\ufontsize\tiny
%%%%
%\a
%睦ちゃん　死んちゃったよ
%ギターＣ和弦　全部ーできない
%Ave Mujika　長く続かない
%\begingroup
%\endgroup
%\hrule\par\bye
