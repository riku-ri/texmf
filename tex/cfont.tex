\input luatexja.sty%
%%%
\expandafter\newtoks\csname^\string\font\endcsname%
\expandafter\newtoks\csname^\string\jfont\endcsname%
%%%
\def\notcsname#1{\csname\string\notcsname\expandafter\endcsname#1\relax}%
\expandafter\def\csname\string\notcsname\endcsname#1#2\relax{#2}%
%
\expandafter\def\csname\string\FONT\endcsname#1#2=#3|#4{%
\expandafter#1\csname\string#1\string#2\endcsname={#3} at #4\relax%
\expandafter\ifx\csname\string#2\endcsname\relax\csname newtoks\expandafter\endcsname\csname\string#2\endcsname\else\relax\fi%
\csname\string#2\endcsname={\csname\string\font\string#2\endcsname\csname\string\jfont\string#2\endcsname}%
\expandafter\ifx\csname\string#1\string\fontname\string#2\endcsname\relax\csname newtoks\expandafter\endcsname\csname\string#1\string\fontname\string#2\endcsname\else\relax\fi%
\csname\string#1\string\fontname\string#2\endcsname={#3}%
%
\csname^\string#1\endcsname={\expandafter\notcsname\string#2}%
\expandafter\edef\csname!\string\font\endcsname{\the\csname^\string\jfont\endcsname}%
\expandafter\edef\csname!\string\jfont\endcsname{\the\csname^\string\font\endcsname}%
\edef#2{%
\the\csname\string#2\endcsname%
\csname^\string\font\endcsname={\csname!\string\jfont\endcsname}%
\csname^\string\jfont\endcsname={\csname!\string\font\endcsname}%
}%
}%
\def\afont#1=#2|#3{\csname\string\FONT\endcsname\font#1=#2|{#3}}% ascii font
\def\ufont#1=#2|#3{\csname\string\FONT\endcsname\jfont#1=#2|{#3}}% unicode font
\def\cfont#1=#2|#3{\afont#1=#2|{#3}\ufont#1=#2|{#3}}% both
\expandafter\def\csname\string\fontsize\endcsname#1#2{%
\csname\string\FONT\expandafter\endcsname\expandafter#1\csname\the\csname^\string#1\endcsname\expandafter\endcsname\expandafter=%
\the\csname\string#1\string\fontname\expandafter\string\csname\the\csname^\string#1\endcsname\endcsname\endcsname|{#2}%
}%
\def\afontsize#1{%
\expandafter\ifx\csname\the\csname^\string\font\endcsname\endcsname\relax%
\message{^^J[\string\afontsize] ascii font did not set by \string\afont^^J}%
\relax%
\else% content of this toks is only set after run \afont
\csname\string\fontsize\endcsname\font{#1}%
\csname\the\csname^\string\font\endcsname\endcsname%
\fi%
}%
\def\ufontsize#1{
\expandafter\ifx\csname\the\csname^\string\jfont\endcsname\endcsname\relax%
\message{^^J[\string\ufontsize] unicode font did not set by \string\ufont^^J}%
\else% content of this toks is only set after run \afont
\csname\string\fontsize\endcsname\jfont{#1}%
\csname\the\csname^\string\font\endcsname\endcsname%
\fi%
}%
\def\fontsize#1{\afontsize{#1}\ufontsize{#1}}%
%%%
\def\tiny{5pt}%
\def\scriptsize{7pt}%
\def\footnotesize{8pt}%
\def\small{9pt}%
\def\normalsize{10pt}%
\def\large{12pt}%
\def\Large{14.4pt}%
\def\LARGE{17.28pt}%
\def\huge{20.74pt}%
\def\Huge{24.88pt}%
\def\BACKGROUND{51.60pt}%
%%
%% test case: [msmincho] and [simsun] font is required
%\hrule\vskip2em
%\begingroup\obeylines\endlinechar=\active\relax
%%%%
%%\afont\a=[msmincho.ttc]|{30pt}\relax
%%%\expandafter\showthe\csname\string\font\string\fontname\string\a\endcsname
%%%\expandafter\showthe\csname^\string\font\endcsname
%%%\expandafter\show\csname!\string\jfont\endcsname
%%%%
%%\ufont\a=[msmincho.ttc]|{30pt}\relax
%%%\expandafter\showthe\csname\string\jfont\string\fontname\string\a\endcsname
%%%\expandafter\showthe\csname^\string\jfont\endcsname
%%%\expandafter\show\csname!\string\font\endcsname
%%%%
%\ufont\a=[lulix-monoflow.ttf]|{15pt}\relax
%\afont\a=[msmincho.ttc]|{30pt}\relax
%%\cfont\a=[msmincho.ttc]|{30pt}\relax
%\afontsize\BACKGROUND
%%\afontsize\BACKGROUND
%%\ufontsize\tiny
%%%%
%\a
%睦ちゃん　死んちゃったよ
%ギターＣ和弦　全部ーできない
%Ave Mujika　長く続かない
%\begingroup
%\endgroup
%\hrule\par\bye
