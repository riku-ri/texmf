\input luatexja.sty%
\begingroup\endlinechar=-1%
\global\newdimen\dimenq
\global\def\`{\futurelet\next\maybelq}
\global\def\maybelq{
‘
\ifx\next\egroup\relax
\else\ifx\next\bgroup\relax
\else\expandafter\expandafter\expandafter\Rlq
\fi\fi
}
\global\long\def\Rlq#1{
\dimenq=1em\divide\dimenq by 3%由于em是相对尺寸，不能在mcaro外进行设置
\ifx`#1\kern-\dimenq\expandafter\`
\else\ifx\`#1\kern-.5\dimenq\fi\expandafter#1
\fi
}
\global\def\'{\futurelet\next\mayberq}
\global\def\mayberq{
’
\ifx\next\egroup\relax
\else\ifx\next\bgroup\relax
\else\expandafter\expandafter\expandafter\Rrq
\fi\fi
}
\global\long\def\Rrq#1{
\dimenq=1em\divide\dimenq by 3
\ifx'#1\kern-\dimenq\expandafter\'
\else\ifx\'#1\kern-.5\dimenq\fi\expandafter#1
\fi
}

\endgroup
